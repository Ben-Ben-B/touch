<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0,maximum-scale=1,minimum-scale=1,user-scalable=no">
  <title>07-tapç‚¹å‡»äº‹ä»¶.html</title>
  <style>
    div:nth-child(1) {
      width: 200px;
      height: 200px;
      background-color: aqua;
      margin: 100px auto;
    }
  </style>
</head>

<body>
  <div></div>
  <script>
    /* 
     1  æ‰‹æŒ‡çš„ä¸ªæ•° ä¸èƒ½è¶…è¿‡  1 
     2  æ‰‹æŒ‡ç§»åŠ¨çš„è·ç¦» ä¸èƒ½å¤ªå¤§ 5px
     3  æ‰‹æŒ‡æŒ‰ä¸‹çš„æ—¶é—´ä¸èƒ½å¤ªé•¿  200ms 
     */
    var div = document.querySelector("div");

    // æ‰‹æŒ‡æŒ‰ä¸‹çš„åæ ‡
    var startX, startY;
    // æ‰‹æŒ‡æŒ‰ä¸‹çš„æ—¶é—´
    var startTime;
    // æ‰‹æŒ‡æŒ‰ä¸‹
    div.addEventListener("touchstart", function (e) {
      // åˆ¤æ–­è§¦æ‘¸ç‚¹çš„ä¸ªæ•° æ‰‹æŒ‡çš„ä¸ªæ•°
      if (e.targetTouches.length > 1) {
        return;
      }

      // è®°å½•æ‰‹æŒ‡æŒ‰ä¸‹åæ ‡
      startX = e.targetTouches[0].clientX;
      startY = e.targetTouches[0].clientY;

      // æ‰‹æŒ‡æŒ‰ä¸‹çš„æ—¶é—´ 
      // var date=new Date()  date.getTime(); è¿”å› 1970 1 1 åˆ°ç°åœ¨çš„æ¯«ç§’æ•°
      startTime = Date.now();

      // console.log(startX, startY, startTime);
    });
    // æ‰‹æŒ‡ç¦»å¼€
    div.addEventListener("touchend", function (e) {
      // åˆ¤æ–­æ‰‹æŒ‡çš„ä¸ªæ•°
      if (e.changedTouches.length > 1) {
        return;
      }

      // è®°å½•æ‰‹æŒ‡æ¾å¼€çš„åæ ‡
      var endX = e.changedTouches[0].clientX;
      var endY = e.changedTouches[0].clientY;
      // è·å–æ‰‹æŒ‡æ¾å¼€çš„æ—¶é—´
      var endTime = Date.now();

      // åˆ¤æ–­æ‰‹æŒ‡ä½ç§»çš„è·ç¦» 
      if (Math.abs(endX - startX) > 5) {
        return;
      }
      if (Math.abs(endY - startY) > 5) {
        return;
      }

      // åˆ¤æ–­æ‰‹æŒ‡æŒ‰ä¸‹çš„æ—¶é—´  å•ä½ æ˜¯æ¯«ç§’
      if (endTime - startTime > 200) {
        return;
      }

      // æ‰§è¡Œtapç‚¹å‡»äº‹ä»¶çš„é€»è¾‘
      console.log("æ­å–œä½   åˆ°è¾¾äº†é’»çŸ³ğŸ’");
    });
  </script>
</body>

</html>